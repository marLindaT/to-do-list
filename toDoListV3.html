<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
</style>
</head>
<style>
html{
	background: #FAFAD2;
	font-family: "Comic Sans MS", cursive, sans-serif;
}


ul{
	margin:0;
	padding:0;
}
li:hover{
	background:green;
}
ul li:nth-child(odd){
	background: gray;
}
 .listItem {
 	margin: 1px;
 	padding:3px;
 	list-style-type: none;
	display:flex;
	justify-content: space-between;
	background: #E6E6FA;
}
ul li.done{
	display:none;
}
ul li.strikeout{
	text-decoration: line-through;
}
.completeBtn{
	background-color: green;
	color: white;
}
</style>
<body>

<div id="header">
	<h1 id ="title">Get It Done List
	</h1>

	<input id="itemInput" type="text" placeholder="enter items">
	<button id="addItemBtn">ADD</button>
	<div id="clock">Clock goes here</div>
</div>


<ul id="list"></ul>


<script>


//countdown time to end of day
function updateClock(){
let date = new Date();
let hoursLeft = 23 - date.getHours();
let minutesLeft = 59 - date.getMinutes();
let secondsLeft = 60 - date.getSeconds();

return (`${hoursLeft} : ${minutesLeft} : ${secondsLeft} until tomorrow`);
};

//paint clock to DOM
function paintClock(){
	let clock = document.getElementById("clock");
	let time = updateClock();
		clock.innerHTML = time;
};

//add item to list	
function addItem(){
	//if input field is not empty take that value and store as item
	let input = document.getElementById("itemInput");
	let item;
	if(input.value != ""){
		 item = input.value;
//create li and assign class 
	let LI = document.createElement("LI");
		LI.className = "listItem";
//take value from input and append it as text node to li
	let text = document.createTextNode(item);
	LI.appendChild(text);
//create a button with text and append to li
	let btn =document.createElement("BUTTON");
		btn.className ="completeBtn";
	let btnTxt=document.createTextNode("complete");
		btn.appendChild(btnTxt);
		LI.appendChild(btn);
//append li with button to list
	let list=document.getElementById("list");
		list.appendChild(LI);
	}	
//reset input field to empty string		
	input.value ="";
};

//hide list items that have been completed by clicking on the item
//consider changing this to remove elements by clicking on complete button
let ulist = document.getElementById("list");


ulist.addEventListener("click", function(e){
	if(e.target.tagName ==="LI"){
		e.target.classList.toggle("strikeout");
	}
}, false)

//work in progress for strikeout effect on text after clicking complete

ulist.addEventListener("click", function(ev){
	if(ev.target.tagName ==="BUTTON"){
		ev.target.parentNode.classList.toggle("done");
	}

})


/******************************

// Click on a close button to hide the current list item
var close = document.getElementsByClassName("close");
var i;
for (i = 0; i < close.length; i++) {
  close[i].onclick = function() {
    var div = this.parentElement;
    div.style.display = "none";
  }
}

******************************/

//event listener wont work without any instances of the class
// let items = document.getElementsByClassName("completeBtn");
// items.addEventListener("click", removeItem, false);

let addItemBtn = document.getElementById("addItemBtn");
addItemBtn.addEventListener("click", addItem, false);

setInterval(paintClock, 1000);

function settingStorage(){

	let saved = document.getElementsByTagName("LI");
	let savedList = [...saved];
	for(let i=0; i<savedList.length; i++){
	console.log(savedList[i]);
}
}


/*********************LOCAL STORAGE PROTOCOL


localStorage.setItem('myCat', 'Tom');

var cat = localStorage.getItem('myCat');

localStorage.removeItem('myCat');

// Clear all items
localStorage.clear();


********************************/

//below for testing

function testing(){
	let input = document.getElementById("itemInput");
	let str = "Hello_World";
	for(let i=0; i<str.length; i++){
		input.value = str;
		addItem();
	}
};

testing();


</script>

</body>
</html>